import { words } from './wordList';
import { IGeneratorOptions } from './IGeneratorOptions';
import { IHTMLOptions } from './IHTMLOptions';

/**
 * generate some lorem ipsum code by the given options
 * @param options pass options to the generator
 */
export function generate(options?: IGeneratorOptions) {
    let loremIpsum: string = "";
    let wordCount = words.length;
    let wordsToGenerate = 100;

    
    if (options) {
        wordsToGenerate = options.words - (options.startWithLoremIpsum === true ? 2 : 0);
    }
    
    if (options.startWithLoremIpsum) {
        loremIpsum += "lorem ipsum "
    }
    
    for (let i: number = 0; i < wordsToGenerate; i++) {
        loremIpsum += `${words[Math.floor(Math.random() * wordCount)]} `;
    }
    
    let loremArray = loremIpsum.split('');
    loremArray.pop();
    loremIpsum = loremArray.join('');
    
    if (options.htmlOptions) {
        let styles = loadHTMLOptions(options.htmlOptions);
        if (options.htmlOptions.wrapInTag) {
            loremIpsum = `<${options.htmlOptions.wrapInTag} ${styles}>${loremIpsum}</${options.htmlOptions.wrapInTag}>`;
        }
    }

    return loremIpsum;
};

function loadHTMLOptions(options: IHTMLOptions) {
    let style: string = `style="`;
    if (options.color) {
        style+= `color:${options.color};`;
    }
    style += `"`
    return style;
}